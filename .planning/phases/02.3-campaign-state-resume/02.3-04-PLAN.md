---
phase: 02.3-campaign-state-resume
plan: 04
type: execute
wave: 2
depends_on: ["02.3-01", "02.3-02", "02.3-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All Phase 2.3 success criteria verified manually"
    - "`lem resume` works with real interrupted campaign"
    - "`lem init` creates valid, usable config"
    - "Webhook notifications fire correctly (if configured)"
---

<objective>
Manual verification checkpoint for Phase 2.3 functionality.

Purpose: Verify all Phase 2.3 features work correctly in real usage scenarios before marking phase complete.

Output: Verified working implementation ready for squash merge.
</objective>

<execution_context>
@/Users/henrybaker/.claude/get-shit-done/workflows/execute-plan.md
@/Users/henrybaker/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02.3-CONTEXT.md

# Implementation summaries
@.planning/phases/02.3-campaign-state-resume/02.3-01-SUMMARY.md
@.planning/phases/02.3-campaign-state-resume/02.3-02-SUMMARY.md
@.planning/phases/02.3-campaign-state-resume/02.3-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Phase 2.3 implementation:
    1. `lem resume` command with interactive menu, --dry-run, --wipe
    2. `lem init` wizard with environment detection and non-interactive mode
    3. Webhook notification system (UserConfig extension + sender)
    4. Unit tests for all new components
  </what-built>
  <how-to-verify>
    **1. Test `lem init` wizard:**
    ```bash
    # Remove any existing config
    rm -f .lem-config.yaml

    # Run non-interactive mode
    lem init --non-interactive --results-dir ./my-results
    cat .lem-config.yaml  # Should show results_dir: ./my-results

    # Run interactive mode (if desired)
    rm .lem-config.yaml
    lem init  # Walk through wizard, verify env detection shown first
    ```

    **2. Test `lem resume` with no state:**
    ```bash
    rm -rf .state/
    lem resume  # Should print "No interrupted work found"
    ```

    **3. Test `lem resume --wipe`:**
    ```bash
    mkdir -p .state/test
    echo "dummy" > .state/test/file.txt
    lem resume --wipe  # Confirm, then verify .state/ deleted
    ls .state/  # Should error (directory doesn't exist)
    ```

    **4. Test resume with real campaign (optional, if time permits):**
    ```bash
    # Start a campaign and Ctrl+C partway through
    lem campaign configs/examples/pytorch_example.yaml -n 2 --cycles 2
    # Press Ctrl+C after first experiment

    # Run resume
    lem resume --dry-run  # Should show interrupted campaign
    lem resume  # Should resume execution
    ```

    **5. Verify unit tests pass:**
    ```bash
    pytest tests/unit/cli/test_resume.py tests/unit/cli/test_init_cmd.py tests/unit/notifications/ tests/unit/config/test_user_config.py -v
    ```

    **6. Verify no regressions:**
    ```bash
    make check  # ruff format + lint + typecheck
    pytest tests/unit/ -v --ignore=tests/unit/test_all_params.py
    ```
  </how-to-verify>
  <resume-signal>
    Type "verified" if all checks pass, or describe any issues found.
  </resume-signal>
</task>

</tasks>

<verification>
Manual verification by user following the checklist above.
</verification>

<success_criteria>
- `lem init` creates valid config in both modes
- `lem resume` handles no-state and wipe correctly
- Unit tests pass
- No regressions in existing tests
- Code passes make check (format + lint + typecheck)
</success_criteria>

<output>
After completion, create `.planning/phases/02.3-campaign-state-resume/02.3-04-SUMMARY.md`

Then update:
- `.planning/STATE.md` to mark Phase 2.3 complete
- `.planning/ROADMAP.md` to check off Phase 2.3 plans
</output>
