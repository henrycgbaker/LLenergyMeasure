---
phase: 15-m2-tech-debt-and-progress-wiring
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/ROADMAP.md
  - .planning/phases/11-subprocess-isolation-and-studyrunner/11-01-SUMMARY.md
  - .planning/phases/11-subprocess-isolation-and-studyrunner/11-02-SUMMARY.md
  - .planning/phases/12-integration/12-01-SUMMARY.md
  - .planning/phases/12-integration/12-02-SUMMARY.md
  - .planning/phases/12-integration/12-03-SUMMARY.md
autonomous: true
requirements: []

must_haves:
  truths:
    - "ROADMAP.md Phase 9 plan checkboxes are ticked [x] for both 09-01 and 09-02"
    - "ROADMAP.md Phase 9 shows correct status — not '1/2 In Progress'"
    - "11-01-SUMMARY.md frontmatter has requirements-completed: [STU-01, STU-02, STU-03, STU-04]"
    - "11-02-SUMMARY.md frontmatter has requirements-completed: [STU-06, STU-07]"
    - "12-01-SUMMARY.md frontmatter has requirements-completed: [RES-13, CM-10]"
    - "12-02-SUMMARY.md frontmatter has requirements-completed: [LA-02, LA-05, STU-NEW-01, RES-15]"
    - "12-03-SUMMARY.md frontmatter has requirements-completed: [CLI-05, CLI-11]"
  artifacts:
    - path: ".planning/ROADMAP.md"
      provides: "Phase 9 correct status and ticked checkboxes"
      contains: "[x] 09-01"
    - path: ".planning/phases/11-subprocess-isolation-and-studyrunner/11-01-SUMMARY.md"
      provides: "Populated requirements-completed frontmatter"
      contains: "requirements-completed"
    - path: ".planning/phases/11-subprocess-isolation-and-studyrunner/11-02-SUMMARY.md"
      provides: "Populated requirements-completed frontmatter"
      contains: "requirements-completed"
    - path: ".planning/phases/12-integration/12-01-SUMMARY.md"
      provides: "Populated requirements-completed frontmatter"
      contains: "requirements-completed"
    - path: ".planning/phases/12-integration/12-02-SUMMARY.md"
      provides: "Populated requirements-completed frontmatter"
      contains: "requirements-completed"
    - path: ".planning/phases/12-integration/12-03-SUMMARY.md"
      provides: "Populated requirements-completed frontmatter"
      contains: "requirements-completed"
  key_links: []
---

<objective>
Fix ROADMAP.md tracking drift for Phase 9 and populate the missing `requirements-completed` frontmatter in Phase 11 and Phase 12 SUMMARY files — resolving 8 tech debt items from the M2 audit.

Purpose: The M2 audit found that Phase 9 shows stale status in ROADMAP.md (plan checkboxes not ticked, status shows incomplete) and that Phase 11 and 12 SUMMARY frontmatter are missing `requirements-completed` lists. This makes 3-source cross-referencing (VERIFICATION + SUMMARY + REQUIREMENTS) unreliable. These are purely documentation fixes with zero code changes.

Output: Accurate tracking in ROADMAP.md and complete traceability in SUMMARY frontmatter.
</objective>

<execution_context>
@/home/h.baker@hertie-school.lan/.claude/get-shit-done/workflows/execute-plan.md
@/home/h.baker@hertie-school.lan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md

<interfaces>
<!-- Key files and their current state. -->

From .planning/ROADMAP.md (Phase 9 section — lines 86-101):
```markdown
### Phase 9: Grid Expansion and StudyConfig
...
Plans:
- [ ] 09-01: ExecutionConfig + StudyConfig models, study/grid.py (expand_grid, apply_cycles, hash, SkippedConfig), unit tests (TDD) [Wave 1]
- [ ] 09-02: load_study_config() in loader.py, format_preflight_summary(), integration tests [Wave 2]
```
Both checkboxes are `[ ]` (unticked) but Phase 9 is fully complete (both SUMMARYs exist with `completed: 2026-02-27`).

From .planning/ROADMAP.md (Phase 11 section — lines 119-131):
```markdown
Plans:
- [ ] TBD
```
Phase 11 is complete but plan list was never updated from "TBD".

From .planning/ROADMAP.md (Phase 12 section — lines 139-152):
```markdown
Plans:
- [ ] TBD
```
Phase 12 is complete but plan list was never updated from "TBD".

From .planning/phases/11-subprocess-isolation-and-studyrunner/11-01-SUMMARY.md (frontmatter):
No `requirements-completed` field exists. Should list: STU-01, STU-02, STU-03, STU-04
(spawn context, Pipe IPC, daemon=False, timeout SIGKILL — all implemented in this plan)

From .planning/phases/11-subprocess-isolation-and-studyrunner/11-02-SUMMARY.md (frontmatter):
No `requirements-completed` field exists. Should list: STU-06, STU-07
(config gap, cycle ordering — gap wiring and SIGINT implemented in this plan)

From .planning/phases/12-integration/12-01-SUMMARY.md (frontmatter):
No `requirements-completed` field exists. Should list: RES-13, CM-10
(StudyResult full schema, multi-backend pre-flight guard)

From .planning/phases/12-integration/12-02-SUMMARY.md (frontmatter):
No `requirements-completed` field exists. Should list: LA-02, LA-05, STU-NEW-01, RES-15
(run_study implemented, manifest always written, _run() dispatcher, result_files paths)

From .planning/phases/12-integration/12-03-SUMMARY.md (frontmatter):
No `requirements-completed` field exists. Should list: CLI-05, CLI-11
(study-mode flags, thermal gap countdown display)

Requirement-to-plan mapping (from REQUIREMENTS.md traceability + audit cross-reference):
- STU-01 (spawn context) → 11-01 (spawns with get_context("spawn"))
- STU-02 (Pipe IPC) → 11-01 (Pipe-only result transport)
- STU-03 (daemon=False) → 11-01 (daemon=False on Process)
- STU-04 (SIGKILL timeout) → 11-01 (p.kill() on timeout)
- STU-06 (config gap) → 11-02 (run_gap() wired between experiments)
- STU-07 (cycle ordering) → 11-02 (apply_cycles with sequential/interleaved/shuffled; also fixed in Phase 14)
- LA-02 (run_study API) → 12-02 (run_study() implemented)
- LA-05 (manifest always written) → 12-02 (ManifestWriter always created)
- STU-NEW-01 (_run() body) → 12-02 (_run() dispatcher implemented)
- RES-13 (StudyResult schema) → 12-01 (StudySummary + full schema)
- RES-15 (result_files paths) → 12-02 (result_files tracked as paths)
- CLI-05 (study flags) → 12-03 (--cycles/--order/--no-gaps)
- CLI-11 (gap countdown) → 12-03 (run_gap countdown display)
- CM-10 (multi-backend guard) → 12-01 (run_study_preflight raises PreFlightError)
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix ROADMAP.md Phase 9, 11, and 12 tracking</name>
  <files>
    .planning/ROADMAP.md
  </files>
  <action>
    **Fix Phase 9 plan checkboxes and status:**

    In ROADMAP.md, find the Phase 9 Plans section (around lines 99-101):
    ```markdown
    Plans:
    - [ ] 09-01: ExecutionConfig + StudyConfig models, study/grid.py (expand_grid, apply_cycles, hash, SkippedConfig), unit tests (TDD) [Wave 1]
    - [ ] 09-02: load_study_config() in loader.py, format_preflight_summary(), integration tests [Wave 2]
    ```

    Replace with ticked checkboxes:
    ```markdown
    Plans:
    - [x] 09-01: ExecutionConfig + StudyConfig models, study/grid.py (expand_grid, apply_cycles, hash, SkippedConfig), unit tests (TDD) [Wave 1]
    - [x] 09-02: load_study_config() in loader.py, format_preflight_summary(), integration tests [Wave 2]
    ```

    **Fix Phase 11 plan list:**

    Find the Phase 11 Plans section (around lines 131-134):
    ```markdown
    Plans:
    - [ ] TBD
    ```

    Replace with the actual completed plans:
    ```markdown
    Plans:
    - [x] 11-01: StudyRunner subprocess isolation — spawn context, Pipe IPC, timeout SIGKILL, structured failures, progress queue [Wave 1]
    - [x] 11-02: SIGINT handling and gap countdown — two-stage interrupt, mark_interrupted, thermal gap countdown, Enter-to-skip [Wave 2]
    ```

    **Fix Phase 12 plan list:**

    Find the Phase 12 Plans section (around lines 148-152):
    ```markdown
    Plans:
    - [ ] TBD
    ```

    Replace with the actual completed plans:
    ```markdown
    Plans:
    - [x] 12-01: StudyResult schema, experiment_gap_seconds rename, run_study_preflight multi-backend guard [Wave 1]
    - [x] 12-02: run_study() API, _run() dispatcher, result_files tracking, worker wiring [Wave 2]
    - [x] 12-03: Study-mode CLI flags (--cycles/--order/--no-gaps), YAML detection, print_study_summary, print_study_progress [Wave 3]
    ```
  </action>
  <verify>
    <manual>Read ROADMAP.md and confirm Phase 9, 11, 12 plan checkboxes are all ticked [x] and descriptions match actual plan summaries</manual>
  </verify>
  <done>
    - Phase 9 plan checkboxes are ticked [x] for both 09-01 and 09-02
    - Phase 11 plan list updated from "TBD" to actual plans with [x]
    - Phase 12 plan list updated from "TBD" to actual plans with [x]
    - No other sections of ROADMAP.md are modified
  </done>
</task>

<task type="auto">
  <name>Task 2: Populate requirements-completed in Phase 11 and 12 SUMMARY frontmatter</name>
  <files>
    .planning/phases/11-subprocess-isolation-and-studyrunner/11-01-SUMMARY.md
    .planning/phases/11-subprocess-isolation-and-studyrunner/11-02-SUMMARY.md
    .planning/phases/12-integration/12-01-SUMMARY.md
    .planning/phases/12-integration/12-02-SUMMARY.md
    .planning/phases/12-integration/12-03-SUMMARY.md
  </files>
  <action>
    Add `requirements-completed` field to each SUMMARY's YAML frontmatter. Place the field before the `duration` or `metrics` field (consistent with existing SUMMARYs like 09-01-SUMMARY.md which has it at line 50).

    **11-01-SUMMARY.md:**
    After the `decisions:` block (around line 47), add:
    ```yaml
    requirements-completed: [STU-01, STU-02, STU-03, STU-04]
    ```
    Rationale: This plan implemented spawn context (STU-01), Pipe IPC (STU-02), daemon=False (STU-03), and SIGKILL timeout (STU-04).

    **11-02-SUMMARY.md:**
    After the `decisions:` block (around line 53), add:
    ```yaml
    requirements-completed: [STU-06, STU-07]
    ```
    Rationale: This plan implemented config gap wiring (STU-06) and the cycle ordering integration into the runner (STU-07). (Note: STU-07 was later found to have a double-apply bug fixed in Phase 14, but the implementation of cycle ordering logic itself was this plan.)

    **12-01-SUMMARY.md:**
    After the `decisions:` block (around line 25), add:
    ```yaml
    requirements-completed: [RES-13, CM-10]
    ```
    Rationale: This plan implemented StudyResult full schema (RES-13) and run_study_preflight multi-backend guard (CM-10).

    **12-02-SUMMARY.md:**
    After the `decisions:` block (around line 24), add:
    ```yaml
    requirements-completed: [LA-02, LA-05, STU-NEW-01, RES-15]
    ```
    Rationale: This plan implemented run_study() API (LA-02), manifest always written (LA-05), _run() dispatcher (STU-NEW-01), and result_files paths not embedded (RES-15).

    **12-03-SUMMARY.md:**
    After the `decisions:` block (around line 22), add:
    ```yaml
    requirements-completed: [CLI-05, CLI-11]
    ```
    Rationale: This plan implemented study-mode CLI flags --cycles/--order/--no-gaps (CLI-05) and thermal gap countdown display (CLI-11).
  </action>
  <verify>
    <manual>Read each SUMMARY file and confirm requirements-completed lists match the requirement-to-plan mapping from the M2 audit</manual>
  </verify>
  <done>
    - 11-01-SUMMARY.md has requirements-completed: [STU-01, STU-02, STU-03, STU-04]
    - 11-02-SUMMARY.md has requirements-completed: [STU-06, STU-07]
    - 12-01-SUMMARY.md has requirements-completed: [RES-13, CM-10]
    - 12-02-SUMMARY.md has requirements-completed: [LA-02, LA-05, STU-NEW-01, RES-15]
    - 12-03-SUMMARY.md has requirements-completed: [CLI-05, CLI-11]
    - All 24 M2 requirements now have SUMMARY traceability
  </done>
</task>

</tasks>

<verification>
Read each modified file and confirm:

1. ROADMAP.md Phase 9 has `[x]` for 09-01 and 09-02
2. ROADMAP.md Phase 11 and 12 have actual plan lists with `[x]` (not "TBD")
3. Each Phase 11/12 SUMMARY has a `requirements-completed` field in frontmatter
4. Requirement IDs match the audit's cross-reference table

```bash
# Verification commands
grep -A2 "09-01:" .planning/ROADMAP.md  # should show [x]
grep -A2 "09-02:" .planning/ROADMAP.md  # should show [x]
grep "requirements-completed" .planning/phases/11-subprocess-isolation-and-studyrunner/11-01-SUMMARY.md
grep "requirements-completed" .planning/phases/11-subprocess-isolation-and-studyrunner/11-02-SUMMARY.md
grep "requirements-completed" .planning/phases/12-integration/12-01-SUMMARY.md
grep "requirements-completed" .planning/phases/12-integration/12-02-SUMMARY.md
grep "requirements-completed" .planning/phases/12-integration/12-03-SUMMARY.md
```
</verification>

<success_criteria>
- ROADMAP.md Phase 9 plan checkboxes are ticked [x] for 09-01 and 09-02
- ROADMAP.md Phase 11 and 12 plan lists show actual plans with [x] (not "TBD")
- All 5 Phase 11/12 SUMMARY files have populated requirements-completed frontmatter
- Requirement IDs in each SUMMARY match the M2 audit cross-reference
</success_criteria>

<output>
After completion, create `.planning/phases/15-m2-tech-debt-and-progress-wiring/15-02-SUMMARY.md`
</output>
