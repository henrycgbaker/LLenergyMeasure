# Phase 02 Plan 01: Extend CampaignConfig Summary

**One-liner:** Added 7 Pydantic models for grid sweeps, explicit experiments, health checks, cold start, daemon scheduling, and IO paths to CampaignConfig; added python-on-whales as optional campaign dependency.

## What Was Done

### Task 1: Extend CampaignConfig with Phase 2 models
Extended `campaign_config.py` with 7 new Pydantic models:

- **CampaignGridConfig** -- Two-level grid definition (backends, shared params, per-backend overrides) with backend validation
- **CampaignExplicitExperiment** -- Config path + inline overrides for explicit experiment entries
- **CampaignHealthCheckConfig** -- GPU memory monitoring, interval checks, auto-restart with max restarts
- **CampaignColdStartConfig** -- Model unload and container restart options for cold start benchmarking
- **CampaignDaemonConfig** -- Interval/total_duration in Nh/Nm format with seconds properties, quiet mode, HH:MM time validation
- **CampaignIOConfig** -- Results/configs/state directories and manifest path property

Extended `CampaignConfig` with `grid`, `experiments`, `health_check`, `cold_start`, `daemon`, and `io` fields. Changed `configs` from required to optional (default empty list). Replaced `validate_configs_exist` with `validate_experiment_sources` that requires at least one of configs/grid/experiments.

### Task 2: Add python-on-whales dependency
Added `python-on-whales>=0.70` as optional dependency with `[campaign]` extras group. Also added to `[dev]` extras for development convenience.

## Commits

| # | Hash | Message |
|---|------|---------|
| 1 | fd9d47c | feat(02-01): extend CampaignConfig with Phase 2 models |
| 2 | f05b938 | chore(02-01): add python-on-whales as campaign optional dependency |

## Files Modified

- `src/llenergymeasure/config/campaign_config.py` -- 7 new models, extended CampaignConfig
- `pyproject.toml` -- python-on-whales dependency, campaign extras group
- `docs/generated/invalid-combos.md` -- Auto-regenerated by pre-commit hook
- `docs/generated/parameter-support-matrix.md` -- Auto-regenerated by pre-commit hook

## Deviations from Plan

None -- plan executed exactly as written.

## Decisions Made

- Duration parsing (Nh/Nm) uses helper functions `_parse_duration` and `_duration_to_seconds` rather than inline regex in each validator -- keeps validators clean, DRY
- `VALID_BACKENDS` defined as module-level constant for reuse across grid validation

## Verification

- All 7 new models importable and instantiable with correct defaults
- Grid backend validation rejects invalid backends
- Duration validation rejects malformed strings
- CampaignConfig accepts grid-only (no configs required)
- Backwards compatible: existing configs-only mode still works
- 16 campaign tests pass, 89 config tests pass (0 regressions)
- python-on-whales importable after `pip install -e ".[campaign]"`

## Duration

~4 minutes
