---
phase: 05-refactor-simplify (NOT YET STARTED — blocked by product vision discussion)
task: 0
total_tasks: 0
status: strategic_discussion_in_progress
last_updated: 2026-02-05T20:15
---

<current_state>
Phase 4 (Codebase Audit) is complete and tagged as `audit-phase4-complete`. Phase 5 has NOT
started. We are in the middle of a deep product vision discussion that must resolve before
Phase 5 scope can be finalised.

The discussion is about whether LLenergyMeasure should become a dual-product ecosystem
(CLI + web platform + central results database) and how that affects the v2.0 refactoring work.

NO PLANS EXIST for Phase 5 yet. No code work was done — this is entirely strategic.
</current_state>

<completed_work>

### Session 1 (2026-02-05, earlier)
- Established dual-product vision (CLI + Web platform)
- Decided deployment model: self-hosted GPU instances + central leaderboard
- Decided API-first architecture direction
- Captured Singularity/Apptainer HPC todo

### Session 2 (2026-02-05, current)
- Tagged Phase 4 state as `audit-phase4-complete` for safe rollback
- Created living product vision document: `.planning/PRODUCT-VISION-DISCUSSION.md`
- User provided detailed web platform vision:
  - For non-technical users (policy makers, public)
  - GUI for model selection, parameter configuration, campaign definition
  - Live visualisation (streaming + power timeseries)
  - Results exploration with interactive plotting
  - Goal: policy advocacy — demonstrate implementation choices matter for LLM energy
- User proposed central results database: both CLI and web users contribute, building
  a growing archive of (model × environment × params → efficiency metrics)
- User questioned whether CLI needs local/bare-metal install given GPU requirement

- Claude provided critical analysis:
  - GPU provisioning is the elephant in the room (who pays for web users' compute?)
  - Recommended web start as results explorer, not experiment runner
  - Argued central DB should be opt-in, not default (privacy, firewalls, principle of least surprise)
  - Pushed back on "all containerised" — researchers prefer bare-metal for benchmark accuracy
  - Proposed campaign system resolution: cut for CLI, build fresh for web (current code architecturally unsuitable)
  - Questioned whether API-first is premature for v2.0 (good layering ≠ HTTP API)

- Three key questions posed to user, not yet answered:
  1. Who pays for GPUs in "run experiments via GUI" scenario?
  2. Opt-in vs default upload for results to central DB?
  3. Keep pip install as primary CLI deployment, or Docker-first?
</completed_work>

<remaining_work>

### Immediate: Continue product vision discussion
1. Resolve GPU provisioning question for web platform
2. Resolve results upload model (opt-in vs default)
3. Resolve CLI deployment model (pip-first vs Docker-first)
4. Decide campaign system fate with full context
5. Decide product sequencing (v2.0 / v3.0 / v4.0 scope)
6. Decide whether Phase 4.1 (Web-Readiness Audit) is needed or not

### After vision is settled:
7. Update `.planning/PRODUCT-VISION-DISCUSSION.md` with final decisions
8. Update `.planning/ROADMAP.md` to reflect revised phases
9. Update `.planning/STATE.md` with new direction
10. Update `.planning/PROJECT.md` with product vision
11. Finalise Phase 5 scope and begin planning

### Phase 5 (scope TBD):
- Critical bug fixes (4 P0s from Phase 4 audit)
- Dead code removal (1,524 lines confirmed)
- CLI simplification (15 → ~9 commands)
- Campaign system simplification (extent depends on vision decisions)
- State machine simplification (6 → 3 states)
- Results schema versioning (needed regardless of web timeline)
</remaining_work>

<decisions_made>

### Firm decisions
- Dual-product vision: CLI + Web platform (separate products, shared core)
- Central results database: archive of efficiency measurements
- Policy advocacy goal: web platform demonstrates implementation matters
- HPC support (SLURM/K8s/Apptainer): deferred to post-v2.0
- Phase 4 audit findings are solid and preserved (tag: audit-phase4-complete)

### Tentative (Claude's recommendations, not yet user-confirmed)
- Web platform should start as results explorer, not experiment runner
- Results upload should be opt-in, not default
- pip install should remain primary CLI deployment, Docker for multi-backend
- Campaign system: cut aggressively for CLI, build fresh for web
- API-first is premature for v2.0 — focus on clean layering instead
- Results schema should be versioned and stabilised in v2.0
</decisions_made>

<blockers>

1. **Product vision not finalised**: Three key questions unanswered (GPU provisioning, upload model, deployment model). These affect Phase 5 scope.
2. **Campaign system fate unclear**: Depends on how much the web vision influences CLI design decisions.
3. **Phase structure undecided**: Whether to insert Phase 4.1 (Web-Readiness Audit) or proceed with Phase 5 directly depends on vision resolution.
</blockers>

<context>
The user's vision has evolved significantly across two sessions. Originally "build a CLI tool",
then "CLI + web face", now "CLI tool + advocacy/democratisation platform + central results DB."

The central insight is that the web platform isn't just a different UI on the same tool — it's
a fundamentally different product serving a different audience (policy makers vs researchers)
with a different goal (advocacy vs measurement).

Key tension: How much should the v2.0 CLI refactor anticipate the web platform? Claude argued
"very little — focus on clean layers and stable results schema, don't build API infrastructure
you don't need yet." User hasn't confirmed this stance.

The living discussion document is `.planning/PRODUCT-VISION-DISCUSSION.md` — this is the
primary reference for the product vision state. It captures options, decisions, and open
questions in structured form.

The user wants genuine pushback and critical examination, not agreement. They explicitly said
"don't just say yes to whatever I say."
</context>

<next_action>
1. Resume the product vision discussion — `/gsd:resume-work`
2. Read `.planning/PRODUCT-VISION-DISCUSSION.md` for full context
3. Address the three unanswered questions from Claude's last message
4. Once vision is settled, update GSD docs (ROADMAP, STATE, PROJECT)
5. Then scope and plan Phase 5
</next_action>
